<!-- 
    Root tag name is ignored, tag on which this control will be created, 
    will be considered for at runtime.
-->
<script>
    import { TaskListViewModel } from "../../view-models/TaskListViewModel";
    import { TaskEditorViewModel } from "../../view-models/TaskEditorViewModel";
    import TaskEditor from "./TaskEditor";
</script>
<AtomGridView
    class="task-list"
    columns="30%, 5, *"
    rows="50, *"
    view-model="{ this.resolve(TaskListViewModel) }">

    <header row="0" column="0:3">
        <button
            style-class="[$this.controlStyle.addButton]"
            event-click="{ ()=> $viewModel.addTask() }">Add New Task</button>
    </header>

    <AtomGridSplitter row="1" column="1" direction="vertical"/>

    <AtomListBox.div
        row="1"
        column="0"
        items="{$viewModel.list}"
        selected-item="$[viewModel.selectedTask]">
        <div 
            template="itemTemplate" 
            class="item">

            <span text="{$data.label}"></span>

            <button
                style-class="[$this.controlStyle.saveButton]"
                event-click="{ ()=> $viewModel.deleteTask($data)  }">Delete</button>
        </div>
    </AtomListBox.div>

    <TaskEditor
        column="2"
        row="1"
        view-model="{ this.resolve(TaskEditorViewModel) }"
        style-display="[ $viewModel.task ? '' : 'none' ]"/>

</div>